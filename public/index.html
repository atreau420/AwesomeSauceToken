<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AwesomeSauceToken - Earn Crypto & Income</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .ad { background: #e0e0e0; padding: 10px; margin: 10px 0; text-align: center; }
        .premium { background: #ffd700; padding: 15px; margin: 10px 0; text-align: center; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to AwesomeSauceToken</h1>
        <p>Earn crypto, play games, and generate income!</p>

        <!-- Ad Section -->
        <div class="ad">
            <h3>Sponsored Ad</h3>
            <p>Check out our premium features below!</p>
            <!-- Placeholder for Google AdSense or crypto ad -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- Premium Subscription -->
        <div class="premium">
            <h3>Premium Subscription - Pay in Any Crypto</h3>
            <p>Accept ETH, USDC, DAI, or any ERC-20 token. Swaps/trades welcome!</p>
            <p><em>Note: You will pay standard Ethereum gas fees for the transaction.</em></p>
            <button onclick="subscribe()">Subscribe with Wallet</button>
        </div>

        <!-- Affiliate Links -->
                <!-- Deploy Receipt -->
        <div class="ad">
            <h3>âœ… Deploy Receipt: Domain Activation</h3>
            <p><strong>Timestamp:</strong> Sept 3, 2025 â€“ 2:01 PM CDT</p>
            <p><strong>Domain:</strong> www.awesomesaucetoken.world</p>
            <p><strong>Registrar:</strong> Netlify (auto-renew enabled)</p>
            <p><strong>SSL Status:</strong> ðŸ”’ HTTPS Active (Let's Encrypt - Issued 2:20 PM CDT)</p>
            <p><strong>Status:</strong> Active - Wallet integrations, auto-swaps, ETH flow ready</p>
            <p>Visit: <a href="https://www.awesomesaucetoken.world" target="_blank">www.awesomesaucetoken.world</a></p>
        </div>

        <!-- Deploy Proof -->
        <div class="ad">
            <h3>ðŸ§¾ Deploy Receipt: Domain Alias Activation</h3>
            <p><strong>Timestamp:</strong> Sept 3, 2025 â€“ 2:01 PM CDT</p>
            <p><strong>Registrar:</strong> Netlify (auto-renew enabled)</p>
            <p><strong>Domain:</strong> www.awesomesaucetoken.world</p>
            <p><strong>Alias Target:</strong> awesomemark-auto-token.netlify.app</p>
            <p><strong>DNS Record:</strong> CNAME - www â†’ awesomemark-auto-token.netlify.app</p>
            <p><strong>Status:</strong> âœ… Active, Wallet integrations live, Auto-swaps functional</p>
        </div>

        <!-- Games -->
        <h2>Play & Earn</h2>
        <button onclick="playGame()">Spin the Wheel</button>

        <!-- Trading Bot Controls -->
        <h2>ðŸ¤– Auto Trading Bot</h2>
        <div id="bot-controls">
            <button onclick="startBot()" id="startBotBtn">Start Trading Bot</button>
            <button onclick="stopBot()" id="stopBotBtn" style="display:none;">Stop Trading Bot</button>
            <button onclick="checkBotStatus()" id="statusBotBtn">Check Bot Status</button>
        </div>
        <div id="bot-status" style="margin-top: 10px; padding: 10px; background: #f0f0f0; border-radius: 5px;">
            <p><strong>Bot Status:</strong> <span id="botStatusText">Not Started</span></p>
            <p><strong>Trades Executed:</strong> <span id="tradeCount">0</span></p>
            <p><strong>Total Profit:</strong> <span id="totalProfit">0.0000 ETH</span></p>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
        <script>
            let web3;
            let provider;
            let account;

            const UNISWAP_ROUTER = '0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D'; // Uniswap V2 Router
            const WETH = '0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2'; // WETH address

            async function connectWallet() {
                if (window.ethereum) {
                    web3 = new Web3(window.ethereum);
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const accounts = await web3.eth.getAccounts();
                    account = accounts[0];
                } else {
                    provider = new WalletConnectProvider({
                        infuraId: "your-infura-id"
                    });
                    await provider.enable();
                    web3 = new Web3(provider);
                    const accounts = await web3.eth.getAccounts();
                    account = accounts[0];
                }
                alert('Wallet connected: ' + account);
            }

            async function swapTokenToETH(tokenAddress, amountIn) {
                const router = new web3.eth.Contract([
                    {
                        "inputs": [
                            {"internalType": "uint256", "name": "amountOutMin", "type": "uint256"},
                            {"internalType": "address[]", "name": "path", "type": "address[]"},
                            {"internalType": "address", "name": "to", "type": "address"},
                            {"internalType": "uint256", "name": "deadline", "type": "uint256"}
                        ],
                        "name": "swapExactTokensForETH",
                        "outputs": [{"internalType": "uint256[]", "name": "amounts", "type": "uint256[]"}],
                        "stateMutability": "nonpayable",
                        "type": "function"
                    }
                ], UNISWAP_ROUTER);

                const path = [tokenAddress, WETH];
                const deadline = Math.floor(Date.now() / 1000) + 60 * 20; // 20 minutes
                const amountOutMin = 0; // Set slippage as needed

                await router.methods.swapExactTokensForETH(amountIn, amountOutMin, path, account, deadline).send({ from: account });
            }

            async function subscribe() {
                if (!account) {
                    await connectWallet();
                }
                const currency = prompt('Enter currency (ETH, USDC, etc.) or leave blank for ETH:') || 'ETH';
                let amount;
                if (currency === 'ETH') {
                    amount = web3.utils.toWei('0.01', 'ether');
                    const tx = await web3.eth.sendTransaction({
                        from: account,
                        to: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e',
                        value: amount
                    });
                    alert('Subscription successful! TX: ' + tx.transactionHash);
                } else {
                    const tokenAddress = prompt('Enter token contract address (e.g., USDC: 0xA0b86a33E6441e88C5F2712C3E9b74F5b8b6b8b8):');
                    if (currency === 'USDC') tokenAddress = '0xA0b86a33E6441e88C5F2712C3E9b74F5b8b6b8b8'; // Example
                    amount = web3.utils.toWei('10', 'mwei'); // 10 USDC (6 decimals)
                    // Approve token for router
                    const tokenContract = new web3.eth.Contract([
                        {"constant": false, "inputs": [{"name": "_spender", "type": "address"}, {"name": "_value", "type": "uint256"}], "name": "approve", "outputs": [{"name": "", "type": "bool"}], "payable": false, "stateMutability": "nonpayable", "type": "function"}
                    ], tokenAddress);
                    await tokenContract.methods.approve(UNISWAP_ROUTER, amount).send({ from: account });
                    // Swap to ETH
                    await swapTokenToETH(tokenAddress, amount);
                    // Then send ETH
                    const ethAmount = web3.utils.toWei('0.01', 'ether');
                    const tx = await web3.eth.sendTransaction({
                        from: account,
                        to: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e',
                        value: ethAmount
                    });
                    alert('Subscription successful with swap! TX: ' + tx.transactionHash);
                }
                fetch('/api/premium', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ address: account, currency }) });
            }

            function donate() {
                subscribe();
            }

            function playGame() {
                window.location.href = '/spin';
            }

            // Bot Control Functions
            async function startBot() {
                try {
                    const response = await fetch('/api/bot/start', { method: 'POST' });
                    const result = await response.text();
                    alert(result);

                    if (result.includes('âœ…')) {
                        document.getElementById('startBotBtn').style.display = 'none';
                        document.getElementById('stopBotBtn').style.display = 'inline-block';
                        document.getElementById('botStatusText').textContent = 'Running';
                        updateBotStatus();
                    }
                } catch (error) {
                    alert('Failed to start bot: ' + error.message);
                }
            }

            async function stopBot() {
                try {
                    const response = await fetch('/api/bot/stop', { method: 'POST' });
                    const result = await response.text();
                    alert(result);

                    if (result.includes('ðŸ›‘')) {
                        document.getElementById('startBotBtn').style.display = 'inline-block';
                        document.getElementById('stopBotBtn').style.display = 'none';
                        document.getElementById('botStatusText').textContent = 'Stopped';
                    }
                } catch (error) {
                    alert('Failed to stop bot: ' + error.message);
                }
            }

            async function checkBotStatus() {
                try {
                    const response = await fetch('/api/bot/status');
                    const result = await response.text();
                    alert(result);
                    updateBotStatus();
                } catch (error) {
                    alert('Failed to check bot status: ' + error.message);
                }
            }

            async function updateBotStatus() {
                try {
                    const response = await fetch('/api/bot/status');
                    const statusText = await response.text();

                    // Parse status (this is a simple implementation)
                    if (statusText.includes('Running')) {
                        document.getElementById('botStatusText').textContent = 'Running';
                        document.getElementById('startBotBtn').style.display = 'none';
                        document.getElementById('stopBotBtn').style.display = 'inline-block';
                    } else {
                        document.getElementById('botStatusText').textContent = 'Stopped';
                        document.getElementById('startBotBtn').style.display = 'inline-block';
                        document.getElementById('stopBotBtn').style.display = 'none';
                    }

                    // Extract trade count and profit if available
                    const tradeMatch = statusText.match(/Trades: (\d+)/);
                    const profitMatch = statusText.match(/Profit: ([\d.]+) ETH/);

                    if (tradeMatch) {
                        document.getElementById('tradeCount').textContent = tradeMatch[1];
                    }
                    if (profitMatch) {
                        document.getElementById('totalProfit').textContent = profitMatch[1] + ' ETH';
                    }
                } catch (error) {
                    console.error('Failed to update bot status:', error);
                }
            }

            // Auto-update status every 30 seconds
            setInterval(updateBotStatus, 30000);

            // Legacy function for backward compatibility
            function trade() {
                startBot();
            }
        </script>
    </div>
</body>
</html>
