<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AwesomeSauceToken - Earn Crypto & Income</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f0f0f0; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 8px; }
        .ad { background: #e0e0e0; padding: 10px; margin: 10px 0; text-align: center; }
        .premium { background: #ffd700; padding: 15px; margin: 10px 0; text-align: center; }
        button { background: #007bff; color: white; border: none; padding: 10px 20px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Welcome to AwesomeSauceToken</h1>
        <p>Earn crypto, play games, and generate income!</p>

        <!-- Ad Section -->
        <div class="ad">
            <h3>Sponsored Ad</h3>
            <p>Check out our premium features below!</p>
            <!-- Placeholder for Google AdSense or crypto ad -->
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX"
             crossorigin="anonymous"></script>
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-XXXXXXXXXXXXXXXX"
                 data-ad-slot="XXXXXXXXXX"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <!-- Premium Subscription -->
        <div class="premium">
            <h3>Premium Subscription - Pay in Any Crypto</h3>
            <p>Accept ETH, USDC, DAI, or any ERC-20 token. Swaps/trades welcome!</p>
            <button onclick="subscribe()">Subscribe with Wallet</button>
        </div>

        <!-- Affiliate Links -->
        <div class="ad">
            <h3>Earn with Affiliates</h3>
            <a href="https://uniswap.org/" target="_blank">Trade on Uniswap</a> - Earn commissions<br>
            <a href="https://opensea.io/" target="_blank">Buy NFTs on OpenSea</a> - Affiliate rewards
        </div>

        <!-- Donation -->
        <div class="ad">
            <h3>Support Us</h3>
            <p>Donate ETH: 0x742d35Cc6634C0532925a3b844Bc454e4438f44e</p>
            <button onclick="donate()">Donate</button>
        </div>

        <!-- Games -->
        <h2>Play & Earn</h2>
        <button onclick="playGame()">Spin the Wheel</button>
        <button onclick="trade()">Start Trading Bot</button>

        <script src="https://cdn.jsdelivr.net/npm/web3@1.8.0/dist/web3.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/@walletconnect/web3-provider@1.8.0/dist/umd/index.min.js"></script>
        <script>
            let web3;
            let provider;
            let account;

            async function connectWallet() {
                if (window.ethereum) {
                    // MetaMask, Coinbase, etc.
                    web3 = new Web3(window.ethereum);
                    await window.ethereum.request({ method: 'eth_requestAccounts' });
                    const accounts = await web3.eth.getAccounts();
                    account = accounts[0];
                } else {
                    // Fallback to WalletConnect
                    provider = new WalletConnectProvider({
                        infuraId: "your-infura-id" // Replace with your Infura ID
                    });
                    await provider.enable();
                    web3 = new Web3(provider);
                    const accounts = await web3.eth.getAccounts();
                    account = accounts[0];
                }
                alert('Wallet connected: ' + account);
            }

            async function subscribe() {
                if (!account) {
                    await connectWallet();
                }
                const currency = prompt('Enter currency (ETH, USDC, etc.) or leave blank for ETH:') || 'ETH';
                let amount;
                if (currency === 'ETH') {
                    amount = web3.utils.toWei('0.01', 'ether');
                } else {
                    // For other tokens, assume ERC-20, need token address
                    const tokenAddress = prompt('Enter token contract address:');
                    const tokenContract = new web3.eth.Contract([{"constant":false,"inputs":[{"name":"_to","type":"address"},{"name":"_value","type":"uint256"}],"name":"transfer","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"nonpayable","type":"function"}], tokenAddress);
                    amount = web3.utils.toWei('10', 'ether'); // Example for USDC (10 USDC)
                    await tokenContract.methods.transfer('0x742d35Cc6634C0532925a3b844Bc454e4438f44e', amount).send({ from: account });
                    alert('Subscription successful with ' + currency);
                    fetch('/api/premium', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ address: account, currency }) });
                    return;
                }
                const tx = await web3.eth.sendTransaction({
                    from: account,
                    to: '0x742d35Cc6634C0532925a3b844Bc454e4438f44e',
                    value: amount
                });
                alert('Subscription successful! TX: ' + tx.transactionHash);
                fetch('/api/premium', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({ address: account, currency: 'ETH' }) });
            }

            function donate() {
                subscribe();
            }

            function playGame() {
                window.location.href = '/spin';
            }

            function trade() {
                window.location.href = '/trade';
            }
        </script>
    </div>
</body>
</html>
